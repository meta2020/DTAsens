---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# DTAsens

<!-- badges: start -->
<!-- badges: end -->

The goal of DTAsens is to conduct sensitivity analysis on DTA meta-analysis

## Installation

You can install the released version of DTAsens from [GitHub](https://github.com/meta2020/DTAsens) with:

``` r
devtools::install_git("meta2020/DTAsens")
```

## Example

This is a basic example which shows you how to solve a common problem:

```{r}
devtools::install_git("meta2020/DTAsens")
library(DTAsens)
## basic example code
```

### Example data 1

```{r}

data(dta)
head(dta)

```

### Optim 1

For a certain selection probability, e.g., p = 0.5

```{r}
optim1(dta, p = 0.5)

optim1(dta, p = 0.5, p.hat = TRUE, auc.all = TRUE, show.data = TRUE)
```

For a series of selection probabilities, e.g., p = 0.9, 0,8, ...,0.1


```{r}
p.seq <- seq(0.9, 0.4, -0.1)

estimates <- sapply(p.seq, function(p) optim2(dta, p)$par)
colnames(estimates)<- paste0("p = ", p.seq)
estimates
```

### Optim 2, estimate contrast

For a certain selection probability, e.g., p = 0.5

```{r}

optim2(dta, p = 0.5)

optim2(dta, p = 0.5, p.hat = TRUE, auc.all = TRUE, show.data = TRUE)

```

For a series of selection probabilities, e.g., p = 0.9, 0.8, ...,0.1


```{r}
p.seq <- seq(0.9, 0.4, -0.1)

estimates <- sapply(p.seq, function(p) optim2(dta, p)$par)
colnames(estimates)<- paste0("p = ", p.seq)
estimates
```

### Example data 2 

```{r}
library(mada)
data("AuditC")

head(AuditC)

optim1(AuditC, 0.8)
optim2(AuditC, 0.8)
```

